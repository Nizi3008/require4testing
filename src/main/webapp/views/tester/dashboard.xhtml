<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Tester Dashboard</title>
    <link rel="stylesheet" type="text/css" href="../../styles.css" />
</h:head>

<h:body>

<h1>Tester Dashboard</h1>

<h:form id="form">

   <p:dataTable id="tbl"
             value="#{testerController.assignedTestRuns}"
             var="tr"
             rowKey="#{tr.dbId}"
             style="width:95%;"
             emptyMessage="Keine Testläufe zugewiesen."
             responsiveLayout="scroll">

    <p:column headerText="TestRun ID" style="width:10rem;">
        <h:outputText value="#{tr.id}" />
    </p:column>

    <p:column headerText="TestCase" style="width:22rem;">
        <h:outputText value="#{tr.testCase.id}" /> – <h:outputText value="#{tr.testCase.title}" />
    </p:column>

    <p:column headerText="Requirement" style="width:22rem;">
        <h:outputText value="#{tr.testCase.requirement.id}" /> – <h:outputText value="#{tr.testCase.requirement.title}" />
    </p:column>
    
    <p:column headerText="Ergebnis">
        <p:selectOneMenu value="#{tr.testResult}" style="width:100%;">
            <f:selectItem itemLabel="OFFEN" itemValue="OFFEN"/>
            <f:selectItem itemLabel="Bestanden" itemValue="PASSED"/>
            <f:selectItem itemLabel="Fehlgeschlagen" itemValue="FAILED"/>
        </p:selectOneMenu>
    </p:column>

    <p:column headerText="Aktion">
        <p:commandButton value="Speichern"
                         actionListener="#{testerController.saveResult(tr.dbId, tr.testResult)}"
                         process="tbl"
                         update="tbl"
                         styleClass="ui-button-primary" />
    </p:column>
</p:dataTable>

    <p:messages autoUpdate="true" />

</h:form>

</h:body>
</html>