<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>Testmanager Dashboard</title>
    <link rel="stylesheet" type="text/css" href="../../styles.css" />
</h:head>

<h:body>

<h1>Testmanager Dashboard</h1>

<p:dataTable value="#{testManagerController.testRuns}" var="tr"
             emptyMessage="Keine Testläufe vorhanden">

    <p:column headerText="TR-ID">
        #{tr.id}
    </p:column>

    <p:column headerText="Tester">
        #{tr.testerName}
    </p:column>

    <p:column headerText="Anzahl Testfälle">
        #{tr.items.size()}
    </p:column>

    <p:column headerText="TestCase-IDs">
        <ui:repeat value="#{tr.items}" var="it" varStatus="st">
            #{it.testCase.id} – #{it.testCase.title}
            #{st.last ? '' : ', '}<br/>
        </ui:repeat>
    </p:column>

</p:dataTable>

<br/>

<h:form>
    <!-- Navigation: outcome statt action -->
    <p:button value="Neuen Testlauf anlegen"
              outcome="/views/testmanager/createTestRun.xhtml"
              styleClass="ui-button-primary" />

    <p:button value="Zurück zur Startseite"
              outcome="/index.xhtml"
              icon="pi pi-home"
              styleClass="ui-button-primary"
              style="margin-left: 0.3rem;" />
</h:form>

</h:body>
</html>